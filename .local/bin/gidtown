#! /bin/sh

pkgname="$1"

cache="${XDG_CACHE_HOME:-$HOME/.cache}/gidtown"

mkdir -p "$cache/$pkgname" || { printf "Cannot write to cache\n"; exit; }

httpCode=$(curl -w '%{http_code}' -o "$cache/$pkgname/PKGBUILD" https://raw.githubusercontent.com/jaredforrest/PKGBUILDS/master/"$pkgname"/PKGBUILD)

[ "$httpCode" -ne 200 ] && { printf "Cannot find package\n"; exit; }

cd "$cache/$pkgname" || { printf "Cannot cd into cache directory\n"; exit; }
makepkg -sic
